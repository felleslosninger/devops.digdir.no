<!doctype html><html lang=no><head><title>Refaktorering - ei god investering | Devops</title><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Devops","url":"\/","description":"","thumbnailUrl":"\/images\/digdir_devops.svg"}</script><meta charset=utf-8><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta name=description content><meta name=keywords content=","><meta http-equiv=content-language content="no"><meta property="og:title" content="Refaktorering - ei god investering"><meta name=og:description content><meta property="og:type" content="website"><meta property="og:url" content="/bloggarkiv/refaktorering/"><meta property="og:locale" content="no"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=prefetch href=/bloggarkiv/refaktorering/><link rel=canonical href=/bloggarkiv/refaktorering/ itemprop=url><link rel=sitemap type=application/xml title=Sitemap href=/sitemap.xml><link rel=stylesheet href=/main.min.css><script src=https://kit.fontawesome.com/85f464b459.js crossorigin=anonymous></script>
<link rel=stylesheet href=https://pro.fontawesome.com/releases/v5.10.0/css/all.css integrity=sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p crossorigin=anonymous></head><body><div role=navigation><a class=skip-main href=#main-content tabindex=0>Hopp til hovedinnhold</a></div><header class=header><div class=container><nav role=navigation class="navbar navbar-expand-lg navbar-light p-0"><a href=/ style=margin-right:50px><img class="my-auto header__logo" width=120 height=30 src=/images/digdir_devops.svg alt=logo></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse d-lg-flex justify-content-between" id=navbarNav><ul class="navbar-nav mb-2 mb-lg-0"><li class=nav-item><a class=nav-link aria-current=page href=/arrangementarkiv/>Arrangementer</a></li><li class=nav-item><a class="nav-link active" aria-current=page href=/bloggarkiv/>Blogg</a></li><li class=nav-item><a class=nav-link aria-current=page href=/nyhetsarkiv/>Nyheter</a></li><li class=nav-item><a class=nav-link aria-current=page href=/om/>Om</a></li></ul></div></nav></div></header><main id=main-content><div class="component component--bg-primary"><div class=container><nav style="--bs-breadcrumb-divider:'>'" aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Hjem</a></li><li class=breadcrumb-item aria-current=page><a href=/bloggarkiv>Bloggarkiv</a></li><li class="breadcrumb-item active" aria-current=page>Refaktorering - ei god investering</li></ol></nav><div class=row><div class=col-lg-7><h1 style=font-size:2.25rem;font-weight:500 class=mb-0>Refaktorering - ei god investering</h1><p class="ingress mb-0" style=margin-top:1.5rem>Kode refaktorering er ein prosess nytta for å endre og rydde i eksisterande kode utan å endre korleis koden fungerer</p></div></div></div></div><div class="component component--narrow"><div class=container><div class="d-flex gap-5"><label class=mb-4>Publisert: 31. Mar 2022</label>
<label>Tid: 10 minutter</label></div><div class=row><div class="col-lg-7 markdown"><p>Hugsar du første gong du løyste ei utfordrande kodeoppgåve? Eller om du ikkje har koda før så hugsar du kanskje ein gong du jobba med ei oppgåve som var litt for vanskeleg, eller bygde eit stort jenga tårn med mange brikkar utan at det datt ned. Då har du kanskje kjent på ei blanding av angst, frustrasjon, lettelse, glede medan du arbeidde med det, løyste det og fekk det til å fungere akkurat som det skulle. Så kjem tilbakemeldingane og du må gjere endringar for å utbetre det du laga. Då har du kanskje kjent på frykta ved tanken på å gjere endringar på denne flotte velfungerande tingen du har laga og tenkjer kanskje: <em>&ldquo;om eg endrar på noko no så sluttar det kanskje å fungere, kanskje eg gjer ein feil og då klarer eg ikkje å fikse den igjen.&rdquo;</em> Slik tenker du gjerne første gong når du skal refaktorere kode du ikkje heilt forstår sjølv om du nettopp skreiv den. Då kjem gjerne kjenslene av angst og frustrasjon tilbake for å prøve å hindre deg frå å lykkast. Om du let desse kjenslene være kjensler, og prøver så vil du kanskje sjå at du klarer det og koden blir enklare å lese, ryddigare og enklere å gjenbruke. Enkel, elegant og gjenbrukbar kode, det er ei herleg kjensle det.</p><blockquote><p><em>Kode-refaktorering er ein prosess nytta for å endre og rydde i eksisterande kode utan å endre korleis koden fungerer</em></p></blockquote><p>Poenget med å refaktorere er å gjere koden meir effektiv og vedlikehaldbar. Å investere litt i refaktorering i dag kan spare deg for mykje teknisk gjeld i framtida. Det er mykje betre å rydde i koden med ein gong enn å ta jobben seinare når kodebasen har blitt endå større. Enkel og vedlikehaldbar kode kostar mindre tid og krefter å sette seg inn i, eller endre i framtida.</p><p>For å unngå at koden råtnar, er refaktorering essensielt. Duplikat kode, dårlege klassifiseringar, hastearbeid og andre avvik frå &ldquo;best practices&rdquo; kan føre til at kodebasen råtnar. &ldquo;Jo Fleire kokkar jo meir søl&rdquo; er eit kjent begrep som kan passe her. Om ein ikkje ryddar etter seg på kjøkkenet så blir det mindre plass og vanskelegare neste gong ein skal lage mat. Det samme gjeld kodebasen. Difor er det viktig å rydde etter seg. Konsekvent navngjeving er eit godt hjelpemiddel for god kodekvalitet.</p><h2 id=kva-har-dette-med-devops-å-gjere>Kva har dette med DevOps å gjere?</h2><p>Ein bør ta seg tid til å refaktorere før ein legg til nye features, eller nye oppdateringar til eksisterande kode. Eller kanskje ein nettopp har produksjonssett ein ny stor flott feature, så er gjerne dette eit av dei beste tidspunkta å rydde litt før ein seie seg ferdig. I DevOps, eller smidig utvikling generelt, er det å rydde i tidlegare skrevet kode heilt essensielt for å kunne halde flyten og utviklingstakten oppe.</p><p>Extreme programming (XP) er ein utviklingsmetodikk der smidig utvikling er heilt sentralt saman med testing og refaktorering. I XP så er dette faktisk så viktig at ein skriv testane først, før ein skriv kode. Dette er kjent som Test Driven Development (TDD), og det bidreg til høg testdekning av kodebasen. TDD fungerer slik at først skriv du ein test som feilar (raud), og så skriv du nok kode til at testen passerer (grøn), før du refaktorerer for å optimalisere og rydde i koden utan at du endrar på korleis den fungerer.</p><p><img src=/refaktorering/tdd.png alt="refaktorering rød grøn metode"></p><blockquote><p><em>Tips: Refaktorer før du legger inn nye features</em></p></blockquote><h2 id=korleis-kan-det-gjerast>Korleis kan det gjerast?</h2><p>Start enkelt med eit steg om gongen, fulgt opp av testing. Bryt ein arbeidet ned i mindre delar så er det meir overkommelig og enklare å teste. Nokon gongar treng ein meir domenekunnskap og utforske mulighetane for å finne enklare løysingar. Under ser du eit døme der eit tidspunkt skal settast på eit gitt format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        <span style=color:#f92672>&lt;...&gt;</span>
</span></span><span style=display:flex><span>        LocalDateTime saDato <span style=color:#f92672>=</span> LocalDateTime<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span>mt<span style=color:#f92672>.</span><span style=color:#a6e22e>getNoarksak</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSaDato</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        XMLGregorianCalendarImpl xmlGregorianCalendar <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> XMLGregorianCalendarImpl<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setYear</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getYear</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setMonth</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getMonthValue</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setDay</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getDayOfWeek</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setHour</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getHour</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setMinute</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getMinute</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        xmlGregorianCalendar<span style=color:#f92672>.</span><span style=color:#a6e22e>setSecond</span><span style=color:#f92672>(</span>saDato<span style=color:#f92672>.</span><span style=color:#a6e22e>getSecond</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        arkivmelding<span style=color:#f92672>.</span><span style=color:#a6e22e>setTidspunkt</span><span style=color:#f92672>(</span>xmlGregorianCalendar<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> arkivmelding<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>Koden opprettar ein <em>saDato</em> som held på ein gitt dato og tidspunkt, før den vert putta inn i eit XMLGregorianCalendarImpl objekt som held på dato og tidsinformasjon. Dette objektet vert så satt som tidspunkt i <em>arkivmelding</em> og denne vert returnert.
I dette dømet så er det mulig å refaktorere, forenkle og finne smartare måtar å gjere ting på. Vha hjelpemetodar tilgjengelig i denne applikasjonen så kan ein parse <em>saDato</em> direkte til rett format og sette tidspunktet.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        <span style=color:#f92672>&lt;...&gt;</span>
</span></span><span style=display:flex><span>        arkivmelding<span style=color:#f92672>.</span><span style=color:#a6e22e>setTidspunkt</span><span style=color:#f92672>(</span>DateTimeUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>toXMLGregorianCalendar</span><span style=color:#f92672>(</span>mt<span style=color:#f92672>.</span><span style=color:#a6e22e>getNoarksak</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getSaDato</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> arkivmelding<span style=color:#f92672>;</span>
</span></span></code></pre></div><blockquote><p><em>Tips: Test ofte</em></p></blockquote><h2 id=konklusjon>Konklusjon</h2><p>Tenk på kode refaktorering som eit reint og ryddig kjøkken. Det er enkelt å finne fram og enkelt å lage mat. Du slepp å rydde før du skal lage middagen og tida spart kan du bruke til noko kjekt!</p><p>Ikkje være redd for å gjere endringar i koden, refaktorering vil auke din eiga forståing og gjere deg endå flinkare til neste gong.</p><p>Kode refaktorering er ein viktig praksis for å tilrettelegge slik at DevOps og smidig utvikling skal fungere optimalt. Ein ryddig kodebase gjer det enklare å forstå og enklare å lage nye features. Refaktorering er ei nedbetaling av teknisk gjeld, og dette er lurt å gjere før rentene samlar seg opp.</p><hr><p>Avslutningsvis ynskjer vi å dele nokre sitat frå Martin Fowler.</p><blockquote><p><em>“I’ve found that refactoring helps me write fast software. It slows the software in the short term while I’m refactoring, but it makes the software easier to tune during optimization. I end up well ahead.”</em></p><p>Martin Fowler, Refactoring: Improving the Design of Existing Code</p></blockquote><blockquote><p><em>"“Whenever I have to think to understand what the code is doing, I ask myself if I can refactor the code to make that understanding more immediately apparent.”"</em></p><p>Martin Fowler, Refactoring: Improving the Design of Existing Code</p></blockquote><blockquote><p><em>“When you find you have to add a feature to a program, and the program&rsquo;s code is not structured in a convenient way to add the feature, first refactor the program to make it easy to add the feature, then add the feature.”</em></p><p>Martin Fowler, Refactoring: Improving the Design of Existing Code</p></blockquote></div></div></div></div></main><script>window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("toTopBtn").style.display="block":document.getElementById("toTopBtn").style.display="none"}function topFunction(){window.scrollTo({top:0,behavior:"smooth"})}</script><style>.to-top-btn{position:fixed;bottom:32px;right:32px;z-index:99;display:none;height:66px;width:66px;line-height:66px;border-radius:50%;text-align:center;background-color:#fff;font-weight:400;transition:.4s all;border:2px solid #000}.to-top-btn span{display:block;color:#000;transition:.4s all;font-size:1.1rem}</style><button class=to-top-btn aria-label="Back to top" onclick=topFunction() id=toTopBtn>
<span style=margin-top:-3px;font-size:2rem class="fa fa-chevron-up"></span></button><footer class="footer component"><div class=figures><svg viewBox="0 0 376 618" fill="none" xmlns="http://www.w3.org/2000/svg"><ellipse cx="188.079" cy="434.92" rx="183.08" ry="183.079" transform="rotate(-90 188.079 434.92)"/><path d="M0 89.9609 283.756.57064 373.142 284.324 89.3859 373.714.0 89.9609z"/></svg></div><div class=container><div class=row><div class=col-lg-4><h2 class=footer__heading>Digitaliseringsdirektoratet</h2><div class=footer__content><ul class=footer__links><li><a href=https://www.digdir.no/digdir/om-digitaliseringsdirektoratet/1547>Om Digitaliseringsdirektoratet</a></li><li><a href=https://www.digdir.no/digdir/jobbe-i-digitaliseringsdirektoratet/705>Jobb hos oss</a></li><li><a href=https://www.digdir.no/node/1340>Digitaliseringsbloggen</a></li></ul></div></div><div class=col-lg-4><h2 class=footer__heading>Kontakt</h2><div class=footer__content><ul class=footer__links><li>Digitaliseringsdirektoratet</li><li>Org.nr. 991 825 827</li></ul><ul class=footer__links><li><a href=https://www.digdir.no/digdir/kontakt-oss/943>Kontakt oss</a></li><li>Telefon: 22 45 10 00</li></ul><div class="footer__icons mb-4"><a href=https://www.facebook.com/Digitaliseringsdirektoratet/><i class="fa-facebook-f fab icon footer-icon--facebook" aria-hidden=true tabindex=-1 title=Facebook></i></a>
<a href=https://twitter.com/digdir_no><i class="fa-twitter fab icon footer-icon--twitter" aria-hidden=true tabindex=-1 title=Twitter></i></a>
<a href=https://www.linkedin.com/company/digitaliseringsdirektoratet><i class="fa-linkedin fab icon footer-icon--linkedin" aria-hidden=true tabindex=-1 title=LinkedIn></i></a></div></div></div><div class=col-lg-4><h2 class=footer__heading>Om nettstedet</h2><div class=footer__content><ul class=footer__links><li><a href=https://www.digdir.no/om-oss/personvernerklaering/706>Digdirs personvernerklæring</a></li><li><a href=https://www.digdir.no/om-oss/informasjonskapsler/707>Digdirs informasjonskapsler</a></li><li><a href=https://uustatus.no/nn/erklaringer/publisert/d7c08370-9d07-409a-9b5d-325335890c49>Tilgjengelighetserklæring</a></li></ul></div></div></div></div></footer><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js integrity=sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM crossorigin=anonymous></script></body><script>function onLoad(){for(var n,t=document.getElementsByClassName("global-message-alert"),e=0;e<t.length;e++)n=t[e].getAttribute("name"),console.log("on load"),console.log(sessionStorage.getItem(n)),sessionStorage.getItem(n)==void 0&&t[e].classList.remove("d-none")}function hideAlert(){var t,e=event.target||event.srcElement;console.log(e),t=e.getAttribute("name"),console.log(t),sessionStorage.setItem(e.name,1),console.log(sessionStorage.getItem(t))}window.onload=onLoad()</script><script async src=https://siteimproveanalytics.com/js/siteanalyze_6255470.js></script></html>